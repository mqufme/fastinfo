<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewsHub - –í–∞—à –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–æ–≤–æ—Å—Ç–µ–π</title>
    <meta name="description" content="–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤">
    <style>
        :root {
            /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-card: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --accent: #007bff;
            --border: #dee2e6;
            --shadow: rgba(0, 0, 0, 0.1);
            --hover: rgba(0, 0, 0, 0.05);
        }

        [data-theme="dark"] {
            /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
            --bg-primary: #121212;
            --bg-secondary: #1e1e1e;
            --bg-card: #1e1e1e;
            --text-primary: #e9ecef;
            --text-secondary: #adb5bd;
            --accent: #4dabf7;
            --border: #343a40;
            --shadow: rgba(0, 0, 0, 0.3);
            --hover: rgba(255, 255, 255, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Header */
        header {
            background-color: var(--bg-secondary);
            padding: 1rem 2rem;
            box-shadow: 0 2px 4px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            text-decoration: none;
        }

        .controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border: 1px solid var(--border);
            border-radius: 20px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            width: 200px;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .filters {
            display: flex;
            gap: 0.5rem;
        }

        select {
            padding: 0.5rem;
            border: 1px solid var(--border);
            border-radius: 4px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-primary);
            font-size: 1.2rem;
            padding: 0.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background-color: var(--hover);
        }

        .refresh-btn {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .refresh-btn:hover {
            opacity: 0.9;
        }

        /* Main content */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .article-card {
            background-color: var(--bg-card);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px var(--shadow);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            animation: fadeIn 0.5s ease-out;
        }

        .article-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .article-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .article-content {
            padding: 1.25rem;
        }

        .article-title {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .article-summary {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .article-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .source {
            font-weight: 600;
        }

        .date {
            font-style: italic;
        }

        /* Loader */
        .loader {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loader.active {
            display: block;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--accent);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        .error-message {
            display: none;
            text-align: center;
            padding: 2rem;
            color: #dc3545;
        }

        .error-message.active {
            display: block;
        }

        /* Load more button */
        .load-more-container {
            text-align: center;
            margin-top: 2rem;
        }

        .load-more-btn {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }

        .load-more-btn:hover {
            opacity: 0.9;
        }

        .load-more-btn:disabled {
            background-color: var(--text-secondary);
            cursor: not-allowed;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 2rem 1rem;
        }

        .modal-content {
            background-color: var(--bg-card);
            border-radius: 8px;
            max-width: 700px;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s ease-out;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-image {
            width: 100%;
            max-height: 350px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        .modal-summary {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .modal-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            text-align: right;
        }

        .read-original-btn {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }

        .read-original-btn:hover {
            opacity: 0.9;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }

            .controls {
                width: 100%;
                justify-content: space-between;
            }

            .filters {
                flex-wrap: wrap;
            }

            .articles-grid {
                grid-template-columns: 1fr;
            }

            .search-box input {
                width: 150px;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 1rem;
            }

            main {
                padding: 1rem;
            }

            .controls {
                flex-direction: column;
                gap: 0.5rem;
            }

            .search-box input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <a href="#" class="logo">NewsHub</a>
            <div class="controls">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –Ω–æ–≤–æ—Å—Ç–µ–π...">
                </div>
                <div class="filters">
                    <select id="source-filter">
                        <option value="">–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
                    </select>
                    <select id="category-filter">
                        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    </select>
                </div>
                <button class="refresh-btn" id="refresh-btn">
                    <span>–û–±–Ω–æ–≤–∏—Ç—å</span>
                </button>
                <button class="theme-toggle" id="theme-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                    üåô
                </button>
            </div>
        </div>
    </header>

    <main>
        <div class="articles-grid" id="articles-container">
            <!-- –°—Ç–∞—Ç—å–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
        </div>

        <div class="loader" id="loader">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</p>
        </div>

        <div class="error-message" id="error-message">
            <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>
        </div>

        <div class="load-more-container">
            <button class="load-more-btn" id="load-more-btn">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button>
        </div>
    </main>

    <div class="modal" id="article-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏</h2>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <img id="modal-image" src="" alt="" class="modal-image">
                <p class="modal-summary" id="modal-summary">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏</p>
                <div class="modal-meta">
                    <span class="source" id="modal-source">–ò—Å—Ç–æ—á–Ω–∏–∫</span>
                    <span class="date" id="modal-date">–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</span>
                </div>
            </div>
            <div class="modal-footer">
                <a href="#" id="modal-link" class="read-original-btn" target="_blank">–ß–∏—Ç–∞—Ç—å –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ</a>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const CONFIG = {
            API_ENDPOINT: '/api/articles',
            ARTICLES_PER_PAGE: 9,
            DEBOUNCE_DELAY: 300
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const state = {
            articles: [],
            filteredArticles: [],
            currentPage: 1,
            hasMore: true,
            isLoading: false,
            filters: {
                search: '',
                source: '',
                category: ''
            }
        };

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const elements = {
            articlesContainer: document.getElementById('articles-container'),
            loader: document.getElementById('loader'),
            errorMessage: document.getElementById('error-message'),
            loadMoreBtn: document.getElementById('load-more-btn'),
            searchInput: document.getElementById('search-input'),
            sourceFilter: document.getElementById('source-filter'),
            categoryFilter: document.getElementById('category-filter'),
            refreshBtn: document.getElementById('refresh-btn'),
            themeToggle: document.getElementById('theme-toggle'),
            articleModal: document.getElementById('article-modal'),
            closeModal: document.getElementById('close-modal'),
            modalTitle: document.getElementById('modal-title'),
            modalImage: document.getElementById('modal-image'),
            modalSummary: document.getElementById('modal-summary'),
            modalSource: document.getElementById('modal-source'),
            modalDate: document.getElementById('modal-date'),
            modalLink: document.getElementById('modal-link')
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });

        /**
         * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
         */
        function initializeApp() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            fetchArticles();

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            setupEventListeners();

            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–º—ã –∏–∑ localStorage
            const savedTheme = localStorage.getItem('theme') || 'light';
            setTheme(savedTheme);
        }

        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
         */
        function setupEventListeners() {
            // –ü–æ–∏—Å–∫ —Å –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–æ–º
            let searchTimeout;
            elements.searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    state.filters.search = e.target.value;
                    applyFilters();
                }, CONFIG.DEBOUNCE_DELAY);
            });

            // –§–∏–ª—å—Ç—Ä—ã
            elements.sourceFilter.addEventListener('change', (e) => {
                state.filters.source = e.target.value;
                applyFilters();
            });

            elements.categoryFilter.addEventListener('change', (e) => {
                state.filters.category = e.target.value;
                applyFilters();
            });

            // –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            elements.refreshBtn.addEventListener('click', () => {
                resetState();
                fetchArticles();
            });

            // –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë"
            elements.loadMoreBtn.addEventListener('click', () => {
                state.currentPage++;
                fetchArticles();
            });

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
            elements.themeToggle.addEventListener('click', toggleTheme);

            // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            elements.closeModal.addEventListener('click', closeModal);
            elements.articleModal.addEventListener('click', (e) => {
                if (e.target === elements.articleModal) {
                    closeModal();
                }
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
        }

        /**
         * –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–µ–π —Å —Å–µ—Ä–≤–µ—Ä–∞
         */
        async function fetchArticles() {
            if (state.isLoading) return;

            state.isLoading = true;
            showLoader();
            hideError();

            try {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç fetch –∫ API
                // const response = await fetch(`${CONFIG.API_ENDPOINT}?page=${state.currentPage}&limit=${CONFIG.ARTICLES_PER_PAGE}`);
                // const data = await response.json();
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // –ó–∞–≥–ª—É—à–∫–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
                const mockData = generateMockData();
                
                if (state.currentPage === 1) {
                    state.articles = mockData;
                } else {
                    state.articles = [...state.articles, ...mockData];
                }

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
                updateFilterOptions();
                
                // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
                applyFilters();
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                state.hasMore = mockData.length === CONFIG.ARTICLES_PER_PAGE;
                updateLoadMoreButton();

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–µ–π:', error);
                showError();
            } finally {
                state.isLoading = false;
                hideLoader();
            }
        }

        /**
         * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
         */
        function generateMockData() {
            const sources = ['BBC News', 'The Guardian', 'Reuters', 'Associated Press', 'CNN'];
            const categories = ['–ü–æ–ª–∏—Ç–∏–∫–∞', '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏', '–ù–∞—É–∫–∞', '–°–ø–æ—Ä—Ç', '–ó–¥–æ—Ä–æ–≤—å–µ'];
            
            return Array.from({ length: CONFIG.ARTICLES_PER_PAGE }, (_, i) => {
                const source = sources[Math.floor(Math.random() * sources.length)];
                const category = categories[Math.floor(Math.random() * categories.length)];
                
                return {
                    id: `article-${state.currentPage}-${i}`,
                    title: `–ù–æ–≤–æ—Å—Ç—å ${state.currentPage * CONFIG.ARTICLES_PER_PAGE + i + 1}: ${getRandomTitle(category)}`,
                    summary: `–≠—Ç–æ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –æ ${category.toLowerCase()}. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –ø–µ—Ä–µ–π–¥—è –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç—å—é.`,
                    image: `https://picsum.photos/400/200?random=${state.currentPage * CONFIG.ARTICLES_PER_PAGE + i}`,
                    source_name: source,
                    source_url: `https://example.com/${source.toLowerCase().replace(' ', '-')}`,
                    published_at: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString(),
                    category: category,
                    full_text_url: `https://example.com/article/${state.currentPage * CONFIG.ARTICLES_PER_PAGE + i}`
                };
            });
        }

        /**
         * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
         */
        function getRandomTitle(category) {
            const titles = {
                '–ü–æ–ª–∏—Ç–∏–∫–∞': [
                    '–ù–æ–≤—ã–µ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Ñ–æ—Ä–º—ã',
                    '–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã',
                    '–í—ã–±–æ—Ä—ã –∏ –∏—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è'
                ],
                '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏': [
                    '–ü—Ä–æ—Ä—ã–≤ –≤ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–µ',
                    '–ù–æ–≤—ã–µ –≥–∞–¥–∂–µ—Ç—ã –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞',
                    '–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É–≥—Ä–æ–∑—ã'
                ],
                '–ù–∞—É–∫–∞': [
                    '–ù–∞—É—á–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≥–æ–¥–∞',
                    '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∫–æ—Å–º–æ—Å–∞',
                    '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏'
                ],
                '–°–ø–æ—Ä—Ç': [
                    '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞',
                    '–¢—Ä–∞–Ω—Å—Ñ–µ—Ä—ã —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤',
                    '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –û–ª–∏–º–ø–∏–∞–¥–µ'
                ],
                '–ó–¥–æ—Ä–æ–≤—å–µ': [
                    '–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –ª–µ—á–µ–Ω–∏—è',
                    '–°–æ–≤–µ—Ç—ã –ø–æ –∑–¥–æ—Ä–æ–≤–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏',
                    '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤ –æ–±–ª–∞—Å—Ç–∏ –º–µ–¥–∏—Ü–∏–Ω—ã'
                ]
            };
            
            const categoryTitles = titles[category] || titles['–ü–æ–ª–∏—Ç–∏–∫–∞'];
            return categoryTitles[Math.floor(Math.random() * categoryTitles.length)];
        }

        /**
         * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–π –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
         */
        function updateFilterOptions() {
            // –ò—Å—Ç–æ—á–Ω–∏–∫–∏
            const sources = [...new Set(state.articles.map(article => article.source_name))];
            updateSelectOptions(elements.sourceFilter, sources, state.filters.source);
            
            // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
            const categories = [...new Set(state.articles.map(article => article.category))];
            updateSelectOptions(elements.categoryFilter, categories, state.filters.category);
        }

        /**
         * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–π –≤ —Å–µ–ª–µ–∫—Ç–µ
         */
        function updateSelectOptions(selectElement, options, currentValue) {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            const currentSelected = selectElement.value;
            
            // –û—á–∏—â–∞–µ–º –≤—Å–µ –æ–ø—Ü–∏–∏ –∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–π ("–í—Å–µ")
            while (selectElement.options.length > 1) {
                selectElement.remove(1);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –æ–ø—Ü–∏–∏
            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                optionElement.textContent = option;
                selectElement.appendChild(optionElement);
            });
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ –≤—Å–µ –µ—â–µ –¥–æ—Å—Ç—É–ø–Ω–æ
            if (options.includes(currentSelected)) {
                selectElement.value = currentSelected;
            } else {
                selectElement.value = currentValue || '';
            }
        }

        /**
         * –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∫ —Å—Ç–∞—Ç—å—è–º
         */
        function applyFilters() {
            let filtered = [...state.articles];
            
            // –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–∏—Å–∫—É
            if (state.filters.search) {
                const searchTerm = state.filters.search.toLowerCase();
                filtered = filtered.filter(article => 
                    article.title.toLowerCase().includes(searchTerm) ||
                    article.summary.toLowerCase().includes(searchTerm)
                );
            }
            
            // –§–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É
            if (state.filters.source) {
                filtered = filtered.filter(article => 
                    article.source_name === state.filters.source
                );
            }
            
            // –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            if (state.filters.category) {
                filtered = filtered.filter(article => 
                    article.category === state.filters.category
                );
            }
            
            state.filteredArticles = filtered;
            renderArticles();
        }

        /**
         * –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç–∞—Ç–µ–π
         */
        function renderArticles() {
            if (state.filteredArticles.length === 0) {
                elements.articlesContainer.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem;">
                        <p>–ù–æ–≤–æ—Å—Ç–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞.</p>
                    </div>
                `;
                return;
            }
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∏–ª–∏ —Å–±—Ä–æ—Å–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            if (state.currentPage === 1) {
                elements.articlesContainer.innerHTML = '';
            }
            
            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Å—Ç–∞—Ç—å–∏
            state.filteredArticles.forEach(article => {
                const articleElement = createArticleElement(article);
                elements.articlesContainer.appendChild(articleElement);
            });
        }

        /**
         * –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å—Ç–∞—Ç—å–∏
         */
        function createArticleElement(article) {
            const articleDiv = document.createElement('div');
            articleDiv.className = 'article-card';
            articleDiv.dataset.id = article.id;
            
            articleDiv.innerHTML = `
                <img src="${article.image}" alt="${article.title}" class="article-image" onerror="this.src='https://picsum.photos/400/200?random=999'">
                <div class="article-content">
                    <h3 class="article-title">${article.title}</h3>
                    <p class="article-summary">${article.summary}</p>
                    <div class="article-meta">
                        <span class="source">${article.source_name}</span>
                        <span class="date">${formatDate(article.published_at)}</span>
                    </div>
                </div>
            `;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            articleDiv.addEventListener('click', () => openModal(article));
            
            return articleDiv;
        }

        /**
         * –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Å—Ç–∞—Ç—å–∏
         */
        function openModal(article) {
            elements.modalTitle.textContent = article.title;
            elements.modalImage.src = article.image;
            elements.modalImage.alt = article.title;
            elements.modalSummary.textContent = article.summary;
            elements.modalSource.textContent = article.source_name;
            elements.modalDate.textContent = formatDate(article.published_at);
            elements.modalLink.href = article.full_text_url;
            
            elements.articleModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        /**
         * –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
         */
        function closeModal() {
            elements.articleModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        /**
         * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
         */
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) {
                return '–°–µ–≥–æ–¥–Ω—è';
            } else if (diffDays === 1) {
                return '–í—á–µ—Ä–∞';
            } else if (diffDays < 7) {
                return `${diffDays} –¥–Ω–µ–π –Ω–∞–∑–∞–¥`;
            } else {
                return date.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
            }
        }

        /**
         * –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
         */
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        /**
         * –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º—ã
         */
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ —Ç–µ–º—ã
            elements.themeToggle.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }

        /**
         * –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
         */
        function resetState() {
            state.currentPage = 1;
            state.articles = [];
            state.filteredArticles = [];
            state.filters.search = '';
            state.filters.source = '';
            state.filters.category = '';
            
            elements.searchInput.value = '';
            elements.sourceFilter.value = '';
            elements.categoryFilter.value = '';
            
            elements.articlesContainer.innerHTML = '';
        }

        /**
         * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–∫–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë"
         */
        function updateLoadMoreButton() {
            elements.loadMoreBtn.disabled = !state.hasMore || state.isLoading;
            elements.loadMoreBtn.textContent = state.hasMore ? '–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë' : '–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã';
        }

        /**
         * –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
         */
        function showLoader() {
            elements.loader.classList.add('active');
        }

        /**
         * –°–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
         */
        function hideLoader() {
            elements.loader.classList.remove('active');
        }

        /**
         * –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
         */
        function showError() {
            elements.errorMessage.classList.add('active');
        }

        /**
         * –°–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
         */
        function hideError() {
            elements.errorMessage.classList.remove('active');
        }
    </script>
</body>
</html>
